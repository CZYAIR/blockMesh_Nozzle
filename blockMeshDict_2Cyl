/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  5                                     |
|   \\  /    A nd           | Web:      www.OpenFOAM.org                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      blockMeshDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //convertToMeters 1;
radius      9.5;//圆柱半径
radiusNeg  -9.5;
box         4;//box和boxNeg定义中间长方体block的范围
boxNeg     -4;
zMax        860;//zMax和zMin定义圆柱体的长度//新：坐标最大值=外部计算域长度+喷孔长度
zMin        0.0;
radiusl     200;//外部计算域半径
radiuslNeg -200;
zN          60;//喷孔长度




nR          20;//扇形block半径上的节点数
nRl         32;//外部大扇形的节点数
nBox        36;//矩形block正方形边上的节点数
nZ          180;//小圆柱轴向方向上的节点数
nZl         180;//大圆柱轴向方向上的节点数
verbose no;

geometry
{
    cylinders
    {
        type      searchableCylinder;
        point1    (0 0 -5);//由point1和point2构成的区域要大于zMax和zMin构成的区域
        point2    (0 0  870);
        radius    $radius;
    }
    cylinderl
    {
        type      searchableCylinder;
        point1    (0 0 -5);//
        point2    (0 0 1060);
        radius    $radiusl;
    }
}

scale 1e-5;


vertices
(
    // 小圆柱方形区域起始
    ($boxNeg $boxNeg $zMin)//0
    ($box    $boxNeg $zMin)//1
    ($boxNeg $box    $zMin)//2
    ($box    $box    $zMin)//3

    // 小圆柱扇形区域起始
    project ($radiusNeg $radiusNeg $zMin) (cylinders)//4
    project ($radius    $radiusNeg $zMin) (cylinders)//5
    project ($radiusNeg $radius    $zMin) (cylinders)//6
    project ($radius    $radius    $zMin) (cylinders)//7

    // 小圆柱方形区域结束
    ($boxNeg $boxNeg $zN)//8
    ($box    $boxNeg $zN)//9
    ($boxNeg $box    $zN)//10
    ($box    $box    $zN)//11

    // 小圆柱扇形区域结束
    project ($radiusNeg $radiusNeg $zN) (cylinders)//12
    project ($radius    $radiusNeg $zN) (cylinders)//13
    project ($radiusNeg $radius    $zN) (cylinders)//14
    project ($radius    $radius    $zN) (cylinders)//15

    // 大圆柱外围扇形起始
    project ($radiuslNeg $radiuslNeg $zN) (cylinderl)//16
    project ($radiusl    $radiuslNeg $zN) (cylinderl)//17
    project ($radiuslNeg $radiusl    $zN) (cylinderl)//18
    project ($radiusl    $radiusl    $zN) (cylinderl)//19

    // 大圆柱方形区域结束
    ($boxNeg $boxNeg $zMax)//20
    ($box    $boxNeg $zMax)//21
    ($boxNeg $box    $zMax)//22
    ($box    $box    $zMax)//23

    // 大圆柱扇形区域结束
    project ($radiusNeg $radiusNeg $zMax) (cylinders)//24
    project ($radius    $radiusNeg $zMax) (cylinders)//25
    project ($radiusNeg $radius    $zMax) (cylinders)//26
    project ($radius    $radius    $zMax) (cylinders)//27

    // 大圆柱外围扇形结束
    project ($radiuslNeg $radiuslNeg $zMax) (cylinderl)//28
    project ($radiusl    $radiuslNeg $zMax) (cylinderl)//29
    project ($radiuslNeg $radiusl    $zMax) (cylinderl)//30
    project ($radiusl    $radiusl    $zMax) (cylinderl)//31
);

blocks
(
    hex ( 4  5  1  0 12 13  9  8) ($nBox $nR   $nZ) simpleGrading (1 1 1)
    hex ( 4  0  2  6 12  8 10 14) ($nR   $nBox $nZ) simpleGrading (1 1 1)
    hex ( 1  5  7  3  9 13 15 11) ($nR   $nBox $nZ) simpleGrading (1 1 1)
    hex ( 2  3  7  6 10 11 15 14) ($nBox $nR   $nZ) simpleGrading (1 1 1)
    hex ( 0  1  3  2  8  9 11 10) ($nBox $nBox $nZ) simpleGrading (1 1 1)
    
    hex ( 12 13 9  8  24 25 21 20) ($nBox $nR   $nZl) simpleGrading (1 1 1)
    hex ( 12 8  10 14 24 20 22 26) ($nR   $nBox $nZl) simpleGrading (1 1 1)
    hex ( 9  13 15 11 21 25 27 23) ($nR   $nBox $nZl) simpleGrading (1 1 1)
    hex ( 10 11 15 14 22 23 27 26) ($nBox $nR   $nZl) simpleGrading (1 1 1)
    hex ( 8  9  11 10 20 21 23 22) ($nBox $nBox $nZl) simpleGrading (1 1 1)

    hex ( 16 17 13 12 28 29 25 24) ($nBox $nRl $nZl) simpleGrading (1 1 1)
    hex ( 16 12 14 18 28 24 26 30) ($nRl $nBox $nZl) simpleGrading (1 1 1)
    hex ( 13 17 19 15 25 29 31 27) ($nRl $nBox $nZl) simpleGrading (1 1 1)
    hex ( 14 15 19 18 26 27 31 30) ($nBox $nRl $nZl) simpleGrading (1 1 1)
);

edges
(
    project  4  5 (cylinders)
    project  7  5 (cylinders)
    project  6  7 (cylinders)
    project  4  6 (cylinders)
    project 12 13 (cylinders)
    project 13 15 (cylinders)
    project 12 14 (cylinders)
    project 14 15 (cylinders)

    project 24 25 (cylinders)
    project 27 25 (cylinders)
    project 26 27 (cylinders)
    project 24 26 (cylinders)

    project 16 17 (cylinderl)
    project 19 17 (cylinderl)
    project 18 19 (cylinderl)
    project 16 18 (cylinderl)
    project 28 29 (cylinderl)
    project 31 29 (cylinderl)
    project 30 31 (cylinderl)
    project 28 30 (cylinderl)
);

//boundary
patches
(
    patch INLET
    (
     (0 1 3 2)
     (0 2 6 4)
     (0 1 5 4)
     (1 5 7 3)
     (2 3 7 6)
    )

    wall NOZZLEWALL
    (
     (4  12  14  6)
     (4   5  13 12)
     (5  13  15  7)
     (6   7  15 14)
    )

    wall SPRAYTOP
    (
     (13 17 19 15)
     (15 19 18 14)
     (14 18 16 12)
     (12 16 17 13)
    )
    
    patch OUTLETSIDE
    (
     (17 29 31 19)
     (16 28 29 17)
     (18 30 28 16)
     (19 31 30 18)
    )

    patch OUTLETBOT
    (
     (20 21 23 22)
     (20 22 26 24)
     (20 21 25 24)
     (21 25 27 23)
     (22 23 27 26)
     (25 29 31 27)
     (26 27 31 30)
     (24 26 30 28)
     (25 24 28 29)
    )
);

// ************************************************************************* //